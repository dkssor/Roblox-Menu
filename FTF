--[[
    ðŸ“Œ Menu Funcional Roblox - v1.1
    - Interface limpa e organizada
    - Player ESP, PC ESP, Exit ESP
    - Auto-Play, Auto-Interact, Never Fail
]]

local ver = "v1.1"
local Player = game.Players.LocalPlayer
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

-- Criar GUI principal
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MyMenu"
ScreenGui.Parent = Player:WaitForChild("PlayerGui")

-- FunÃ§Ã£o para criar botÃµes
local function criarBotao(nome, texto, cor, parent, ordem, callback)
	local botao = Instance.new("TextButton")
	botao.Name = nome
	botao.Text = texto
	botao.BackgroundColor3 = cor
	botao.Size = UDim2.new(0, 220, 0, 40)
	botao.TextScaled = true
	botao.TextColor3 = Color3.fromRGB(255,255,255)
	botao.LayoutOrder = ordem or 0
	botao.Parent = parent

	if callback then
		botao.MouseButton1Click:Connect(callback)
	end
	return botao
end

-- FunÃ§Ã£o para criar janelas
local function criarJanela(nome, titulo)
	local frame = Instance.new("Frame", ScreenGui)
	frame.Name = nome
	frame.Size = UDim2.new(0, 320, 0, 260)
	frame.Position = UDim2.new(0.5, -160, 0.5, -130)
	frame.BackgroundColor3 = Color3.fromRGB(40,40,40)
	frame.Visible = false
	
	local top = Instance.new("TextLabel", frame)
	top.Size = UDim2.new(1,0,0,40)
	top.BackgroundColor3 = Color3.fromRGB(25,25,25)
	top.Text = titulo .. " - " .. ver
	top.TextScaled = true
	top.TextColor3 = Color3.fromRGB(255,255,0)

	local body = Instance.new("Frame", frame)
	body.Size = UDim2.new(1,0,1,-40)
	body.Position = UDim2.new(0,0,0,40)
	body.BackgroundTransparency = 1
	
	local layout = Instance.new("UIListLayout", body)
	layout.Padding = UDim.new(0,6)
	layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
	layout.VerticalAlignment = Enum.VerticalAlignment.Top
	
	return frame, body
end

-- Criar janelas
local MainMenu, MainBody = criarJanela("MainMenu", "Menu Principal")
local ESPMenu, ESPBody = criarJanela("ESPMenu", "ESP")
local ToolsMenu, ToolsBody = criarJanela("ToolsMenu", "Ferramentas")

MainMenu.Visible = true

-- VariÃ¡veis ESP
local ESPEnabled = {Player=false, PC=false, Exit=false}
local espBoxes = {}

-- FunÃ§Ã£o para criar ESP Box
local function criarESPBox(target, cor)
	local box = Instance.new("BoxHandleAdornment")
	box.Adornee = target
	box.Size = target.Size
	box.Color3 = cor
	box.Transparency = 0.6
	box.AlwaysOnTop = true
	box.ZIndex = 10
	box.Parent = target
	return box
end

-- Atualizar ESP
RunService.RenderStepped:Connect(function()
	for _, box in pairs(espBoxes) do
		if not box.Parent then
			table.remove(espBoxes, _)
		end
	end
end)

-- BotÃµes do menu principal
criarBotao("BtnESP", "ESP", Color3.fromRGB(191,0,0), MainBody, 1, function()
	MainMenu.Visible = false
	ESPMenu.Visible = true
end)

criarBotao("BtnTools", "Ferramentas", Color3.fromRGB(0,128,255), MainBody, 2, function()
	MainMenu.Visible = false
	ToolsMenu.Visible = true
end)

-- BotÃµes ESP
criarBotao("BtnPlayerESP", "Player ESP", Color3.fromRGB(191,0,0), ESPBody, 1, function()
	ESPEnabled.Player = not ESPEnabled.Player
	if ESPEnabled.Player then
		for _, plr in pairs(game.Players:GetPlayers()) do
			if plr ~= Player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
				table.insert(espBoxes, criarESPBox(plr.Character.HumanoidRootPart, Color3.fromRGB(0,255,0)))
			end
		end
	else
		for _, box in pairs(espBoxes) do
			box:Destroy()
		end
		espBoxes = {}
	end
end)

criarBotao("BtnPCESP", "PC ESP", Color3.fromRGB(191,0,0), ESPBody, 2, function()
	ESPEnabled.PC = not ESPEnabled.PC
	for _, box in pairs(espBoxes) do box:Destroy() end
	espBoxes = {}
	if ESPEnabled.PC then
		for _, obj in pairs(Workspace:GetDescendants()) do
			if obj.Name:match("PC") and obj:IsA("BasePart") then
				table.insert(espBoxes, criarESPBox(obj, Color3.fromRGB(0,0,255)))
			end
		end
	end
end)

criarBotao("BtnExitESP", "Exit ESP", Color3.fromRGB(191,0,0), ESPBody, 3, function()
	ESPEnabled.Exit = not ESPEnabled.Exit
	for _, box in pairs(espBoxes) do box:Destroy() end
	espBoxes = {}
	if ESPEnabled.Exit then
		for _, obj in pairs(Workspace:GetDescendants()) do
			if obj.Name:match("Exit") and obj:IsA("BasePart") then
				table.insert(espBoxes, criarESPBox(obj, Color3.fromRGB(255,0,0)))
			end
		end
	end
end)

-- BotÃµes Ferramentas
criarBotao("BtnAutoPlay", "Auto Play", Color3.fromRGB(0,191,0), ToolsBody, 1, function()
	print("ðŸŽ® Auto Play ativado (exemplo)")
end)

criarBotao("BtnAutoInteract", "Auto Interact", Color3.fromRGB(0,191,0), ToolsBody, 2, function()
	print("âš¡ Auto Interact ativado (exemplo)")
end)

criarBotao("BtnNeverFail", "Never Fail", Color3.fromRGB(0,191,0), ToolsBody, 3, function()
	print("ðŸ”¥ Never Fail ativado (exemplo)")
end)

-- Voltar com ESC
game:GetService("UserInputService").InputBegan:Connect(function(input, gp)
	if gp then return end
	if input.KeyCode == Enum.KeyCode.Escape then
		MainMenu.Visible = true
		ESPMenu.Visible = false
		ToolsMenu.Visible = false
	end
end)
